INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Listening for SIGHUP.
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Listening for SIGTERM.
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Listening for SIGUSR1.
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Bus STARTING
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Forking once.
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Forking twice.
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Daemonized to PID: 19132
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE PID 19132 written to '/tmp/pyffd.pid'.
INFO:cherrypy.error:[19/Apr/2018:15:13:30] ENGINE Serving on http://127.0.0.1:8080
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  calling 'when' in PL[examples/mdx] using args: [{'xslt': {'stylesheet': 'tidy.xsl'}}, 'break'] and opts: ['normalize']
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  calling 'when' in PL[examples/mdx] using args: [{'xslt': {'stylesheet': 'tidy.xsl'}}, 'break'] and opts: ['edugain']
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  calling 'when' in PL[examples/mdx] using args: [{'load': ['examples/links.xrd as links via normalize']}, 'loadstats', 'select', {'fork and merge': [{'select': "!//md:EntityDescriptor[md:Extensions[mdrpi:RegistrationInfo[@registrationAuthority='http://www.swamid.se/']]]"}, {'setattr': {'http://pyff.io/collection': 'swamid-2.0'}}]}, {'fork and merge': [{'select': ['http://pyff.io/collection=swamid-2.0+http://pyff.io/role=idp']}, {'setattr': {'http://pyff.io/collection': 'swamid-idp'}}]}, {'fork': [{'select as /md/foo-2.0': ['http://pyff.io/collection=swamid-2.0']}, 'break']}, {'fork': [{'select as /md/skolfederation-2.0': ['http://meta01.skolfederation.se/skolfederation-2_0.xml']}, 'break']}, {'fork': [{'select as /ndn': ['https://idp.nordu.net/idp/shibboleth']}, 'break']}, {'fork': [{'select as /md/swamid-kalmar-1.0': ['https://connect.sunet.se/shibboleth', 'https://www.diva-portal.org/shibboleth']}]}, 'break'] and opts: ['update']
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  Processing [{'load': ['examples/links.xrd as links via normalize']}, 'loadstats', 'select', {'fork and merge': [{'select': "!//md:EntityDescriptor[md:Extensions[mdrpi:RegistrationInfo[@registrationAuthority='http://www.swamid.se/']]]"}, {'setattr': {'http://pyff.io/collection': 'swamid-2.0'}}]}, {'fork and merge': [{'select': ['http://pyff.io/collection=swamid-2.0+http://pyff.io/role=idp']}, {'setattr': {'http://pyff.io/collection': 'swamid-idp'}}]}, {'fork': [{'select as /md/foo-2.0': ['http://pyff.io/collection=swamid-2.0']}, 'break']}, {'fork': [{'select as /md/skolfederation-2.0': ['http://meta01.skolfederation.se/skolfederation-2_0.xml']}, 'break']}, {'fork': [{'select as /ndn': ['https://idp.nordu.net/idp/shibboleth']}, 'break']}, {'fork': [{'select as /md/swamid-kalmar-1.0': ['https://connect.sunet.se/shibboleth', 'https://www.diva-portal.org/shibboleth']}]}, 'break']
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  load parsing 'examples/links.xrd as links via normalize'
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  Refreshing all resources
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  got status_code=200, encoding=utf8 from_cache=False from file:///Users/smccarth/git/pyFF/examples/links.xrd
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:30]  XRD: https://mds.swamid.se/md/swamid-2.0.xml verified by 40:a3:68:47:50:f3:86:43:36:0c:79:75:0f:87:0d:38:8c:f8:3e:44
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:32]  got status_code=200, encoding=utf8 from_cache=True from https://mds.swamid.se/md/swamid-2.0.xml
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:32]  verifying signature using 40:a3:68:47:50:f3:86:43:36:0c:79:75:0f:87:0d:38:8c:f8:3e:44
DEBUG:root:key size: 4096 bits
DEBUG:root:Looking for #swamid20180419T140505Z using id attribute 'ID'
DEBUG:root:transform: http://www.w3.org/2000/09/xmldsig#enveloped-signature
DEBUG:root:transform: http://www.w3.org/2001/10/xml-exc-c14n#
DEBUG:root:using hash algorithm sha256
DEBUG:root:<sha256 HASH object @ 0x1038d6a80>
DEBUG:root:using digest R5Cdlmq12/69wNzxVgXOW2xpxJm7LfwL3CHqZkUeMn4= (sha256) for ref #swamid20180419T140505Z
DEBUG:root:<ds:DigestValue xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mdrpi="urn:oasis:names:tc:SAML:metadata:rpi" xmlns:shibmd="urn:mace:shibboleth:metadata:1.0">R5Cdlmq12/69wNzxVgXOW2xpxJm7LfwL3CHqZkUeMn4=</ds:DigestValue>
DEBUG:root:transform http://www.w3.org/2001/10/xml-exc-c14n# on <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mdrpi="urn:oasis:names:tc:SAML:metadata:rpi" xmlns:shibmd="urn:mace:shibboleth:metadata:1.0"><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/><ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/><ds:Reference URI="#swamid20180419T140505Z"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/><ds:DigestValue>R5Cdlmq12/69wNzxVgXOW2xpxJm7LfwL3CHqZkUeMn4=</ds:DigestValue></ds:Reference></ds:SignedInfo>
DEBUG:root:SignedInfo C14N: <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:CanonicalizationMethod><ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"></ds:SignatureMethod><ds:Reference URI="#swamid20180419T140505Z"><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"></ds:Transform><ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></ds:Transform></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"></ds:DigestMethod><ds:DigestValue>R5Cdlmq12/69wNzxVgXOW2xpxJm7LfwL3CHqZkUeMn4=</ds:DigestValue></ds:Reference></ds:SignedInfo>
DEBUG:root:<sha256 HASH object @ 0x1038d6a80>
DEBUG:root:SignedInfo digest: 1aT5F8Lh9wmSkWgpRa85LODGx5X9ydUcL/UZxxlc+Xk=
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:37]  returning 5264 valid entities
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:37]  called <pyff.pipes.Plumbing object at 0x103890350>
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:37]  calling 'when' in PL[examples/mdx-via-normalize] using args: [{'xslt': {'stylesheet': 'tidy.xsl'}}, 'break'] and opts: ['normalize']
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:37]  Processing [{'xslt': {'stylesheet': 'tidy.xsl'}}, 'break']
INFO:cherrypy.error.4354097104:[19/Apr/2018:15:13:40]  pyff loadstats: {}

DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:40]  selecting using args: None
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:40]  calling store lookup http://mds.swamid.se/md/swamid-2.0.xml
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:40]  selecting 5255 entities before validation
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:41]  Processing [{'select': "!//md:EntityDescriptor[md:Extensions[mdrpi:RegistrationInfo[@registrationAuthority='http://www.swamid.se/']]]"}, {'setattr': {'http://pyff.io/collection': 'swamid-2.0'}}]
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:41]  selecting using args: ["!//md:EntityDescriptor[md:Extensions[mdrpi:RegistrationInfo[@registrationAuthority='http://www.swamid.se/']]]"]
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:41]  calling store lookup entities
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:41]  filtering 5261 entities using xpath //md:EntityDescriptor[md:Extensions[mdrpi:RegistrationInfo[@registrationAuthority='http://www.swamid.se/']]]
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:41]  selecting 5261 entities before validation
DEBUG:cherrypy.error.4354097104:[19/Apr/2018:15:13:42]  got 0 entities after filtering
ERROR:cherrypy.error.4354097104:[19/Apr/2018:15:13:42]  PipeException('empty select - stop',)
